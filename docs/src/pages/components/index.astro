---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Page.astro';
import type { MDXInstance } from 'astro';

const allComponents = await getCollection('components');

const links = allComponents.map(({data, slug}) => ({
		text: data.title,
		href: `/components/${slug}`
	}))

const components = await Astro.glob('../../content/components/*.mdx');
---

<Layout items={links} backHref="/">
	<h1 class="text-4xl font-bold">Components</h1>
	<p>{allComponents.length} components</p>
	<div class="grid grid-cols-2 gap-8">
		{allComponents.map(({data, slug}) => {
			const { Component }: any = components.find((item) => item.frontmatter.title === data.title)
			return (
			<div class="card">
				<div class="card__body aspect-video grid place-content-center">
					{Component ? <Component /> : <h2>{data.title}</h2>}
				</div>
				<div class="card__actions">
					<a href={`/components/${slug}`} class="button">More info â†’</a>
				</div>
			</div>
		)
		})}
	</div>
</Layout>

